<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>规则与词条 | 月之森的黄瓜架</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <canvas id="bg-canvas"></canvas>

  <div class="shell">
    <header class="site-header">
      <div class="container header-inner">
        <a href="index.html" class="logo">月の森<span>🥒</span></a>
        <nav class="nav-links">
          <a href="boardgame.html" class="nav-link">桌游卡包</a>
          <a href="index.html" class="nav-link">资料馆首页</a>
          <a href="https://cyanrain7999.github.io" class="nav-link">返回主站</a>
        </nav>
      </div>
    </header>

    <main class="container boardgame-ref-main">
      <!-- 顶部简介 -->
      <section class="hero">
        <p class="eyebrow">Board Game · Reference</p>
        <h1 class="hero-title">规则书与术语索引</h1>
        <p class="hero-subtitle">
          这里集中放置桌游的基础规则、进阶规则、DLC 补充，以及常用的术语/词条解释。
          <br />
          当你在卡包之间来回跳时，这里可以作为一个“总规则中心”。
        </p>
      </section>

      <!-- 主体两栏：左规则 / 右词条 -->
      <section class="boardgame-ref-grid">
        <!-- ✅ 左：规则结构面板（完整包裹在一个 div 里） -->
        <div class="boardgame-ref-panel">
          <h2 class="section-title small">规则书</h2>
          <p class="section-subtitle">
            可以把这里当作规则索引页：按模块拆开，方便日后扩展。
          </p>

          <div class="rules-list">
            <!-- 基础规则：跳到规则书页面的 #core-rules 段 -->
            <a class="rule-card rule-card--link" href="boardgame-rules.html#one">
              <h3 class="rule-title">游戏背景、游戏目标与胜利条件</h3>
              <p class="rule-meta"></p>
              <p class="rule-text">
                胜负条件说明。
              </p>
            </a>

            <!-- DLC1 规则 -->
            <a class="rule-card rule-card--link" href="boardgame-rules.html#two">
              <h3 class="rule-title">游戏配件与设置</h3>
              <p class="rule-meta"></p>
              <p class="rule-text">
                区域设置、卡牌设置、游戏准备。
              </p>
            </a>

            <!-- 镜世界规则 -->
            <a class="rule-card rule-card--link" href="boardgame-rules.html#three">
              <h3 class="rule-title">回合流程</h3>
              <p class="rule-meta"></p>
              <p class="rule-text">
                游戏按回合制进行，每位玩家的回合必须严格按照四个阶段顺序执行。
              </p>
            </a>

            <!-- 镜世界规则 -->
            <a class="rule-card rule-card--link" href="boardgame-rules.html#four">
              <h3 class="rule-title">战斗与伤害规则</h3>
              <p class="rule-meta"></p>
              <p class="rule-text">
                遭遇状态、远程攻击、主城攻防、单位离场状态。
              </p>
            </a>

            <!-- 镜世界规则 -->
            <a class="rule-card rule-card--link" href="boardgame-rules.html#five">
              <h3 class="rule-title">时代演进与急报系统</h3>
              <p class="rule-meta"></p>
              <p class="rule-text">
                时代演进、急报、晋升结算表。
              </p>
            </a>

            <!-- FAQ / 勘误 -->
            <a class="rule-card rule-card--link rule-card--placeholder" href="boardgame-rules.html#faq">
              <h3 class="rule-title">Q&A 与勘误</h3>
              <p class="rule-text">
                FAQ、勘误、平衡调整说明。
              </p>
            </a>
          </div>
        </div> <!-- ← 这一行是关键：左边 panel 真的关闭了 -->

        <!-- ✅ 右：词条区 + 搜索面板（作为另一个兄弟 div） -->
        <div class="boardgame-ref-panel">
          <h2 class="section-title small">术语 / 词条</h2>
          <p class="section-subtitle">
            在这里维护核心关键字：例如“核心单位”、“雇佣单位”、“政策”、
            “泛用”、“体系”等，方便查规则时快速定位概念。
          </p>

          <div class="form-row">
            <label for="term-search">搜索词条</label>
            <input
              id="term-search"
              class="input"
              type="text"
              placeholder="输入关键词，例如：核心单位 / 控制 / 经济"
            />
          </div>

          <div id="term-list" class="term-list-grid">
            <!-- 词条列表由 JS 渲染 -->
          </div>
        </div> <!-- 右侧 panel 结束 -->
      </section>
    </main>

    <footer class="site-footer">
      <div class="container">
        © 2025 月之森的黄瓜架 · Board Game Reference
      </div>
    </footer>
  </div>

  <script src="particles.js"></script>
  <script src="data/terms/terms.js"></script>
  <script>
    const TERMS = window.BOARDGAME_TERMS || [];

    function renderTerms(filterText = "") {
      const container = document.getElementById("term-list");
      if (!container) return;

      const q = filterText.trim().toLowerCase();

      const filtered = TERMS.filter((t) => {
        if (!q) return true;
        const haystack =
          (t.term || "") +
          " " +
          (t.category || "") +
          " " +
          (t.text || "") +
          " " +
          (t.tags || []).join(" ");
        return haystack.toLowerCase().includes(q);
      });

      if (!filtered.length) {
        container.innerHTML = `
          <p class="section-subtitle">
            没有找到匹配的词条。可以考虑在 TERMS 数组中新增一条，或者放宽搜索关键词。
          </p>
        `;
        return;
      }

      container.innerHTML = filtered
        .map((t) => {
          const tagLine = (t.tags || []).join(" · ");
          return `
            <article class="term-card">
              <h3 class="term-title">${t.term}</h3>
              <p class="term-meta">
                ${t.category ? `<span>${t.category}</span>` : ""}
                ${
                  tagLine
                    ? `<span class="dot-sep">·</span><span>${tagLine}</span>`
                    : ""
                }
              </p>
              <p class="term-text">${t.text}</p>
            </article>
          `;
        })
        .join("");
    }

    document.addEventListener("DOMContentLoaded", () => {
      const input = document.getElementById("term-search");
      if (input) {
        input.addEventListener("input", () => {
          renderTerms(input.value);
        });
      }
      renderTerms("");
    });
  </script>
</body>
</html>
