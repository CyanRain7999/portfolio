<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å¡åŒ…è¯¦æƒ… | æœˆä¹‹æ£®çš„é»„ç“œæ¶</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <canvas id="bg-canvas"></canvas>

  <div class="shell">
    <header class="site-header">
      <div class="container header-inner">
        <a href="index.html" class="logo">æœˆã®æ£®<span>ğŸ¥’</span></a>
        <nav class="nav-links">
          <a href="boardgame.html" class="nav-link">è¿”å›å¡åŒ…åˆ—è¡¨</a>
          <a href="index.html" class="nav-link">èµ„æ–™é¦†é¦–é¡µ</a>
        </nav>
      </div>
    </header>

    <main class="container" id="pack-page-root">
      <!-- JS å¡«å……å†…å®¹ -->
    </main>

    <footer class="site-footer">
      <div class="container">
        Â© 2025 æœˆä¹‹æ£®çš„é»„ç“œæ¶ Â· Board Game
      </div>
    </footer>
  </div>

  <script src="boardgame-data.js"></script>
  <script src="portfolio-particles.js"></script>
  <script>
    function getQueryParam(name) {
      const params = new URLSearchParams(window.location.search);
      return params.get(name);
    }

    document.addEventListener("DOMContentLoaded", () => {
      const packId = getQueryParam("id");
      const root = document.getElementById("pack-page-root");

      if (!packId || !window.CARD_GAME) {
        root.innerHTML = `
          <section class="boardgame-pack-hero">
            <h1 class="hero-title">æœªæ‰¾åˆ°å¡åŒ…</h1>
            <p class="hero-subtitle">
              é“¾æ¥ä¼¼ä¹ç¼ºå°‘å‚æ•°ï¼Œæˆ–è€…è¯¥å¡åŒ…å°šæœªæ”¶å½•ã€‚
            </p>
            <p>
              <a href="boardgame.html" class="btn btn-primary btn-compact">è¿”å›å¡åŒ…åˆ—è¡¨</a>
            </p>
          </section>
        `;
        return;
      }

      const pack = CARD_GAME.packs.find((p) => p.id === packId);

      if (!pack) {
        root.innerHTML = `
          <section class="boardgame-pack-hero">
            <h1 class="hero-title">æœªæ‰¾åˆ°å¡åŒ…</h1>
            <p class="hero-subtitle">
              æ²¡æœ‰æ‰¾åˆ° ID ä¸º <code>${packId}</code> çš„å¡åŒ…ï¼Œè¯·ç¡®è®¤é“¾æ¥æˆ–æ•°æ®æ–‡ä»¶ã€‚
            </p>
            <p>
              <a href="boardgame.html" class="btn btn-primary btn-compact">è¿”å›å¡åŒ…åˆ—è¡¨</a>
            </p>
          </section>
        `;
        return;
      }

      const cards = CARD_GAME.cards[pack.id] || [];

      const badgeText =
        pack.status === "released"
          ? "å·²æ”¶å½•"
          : pack.status === "wip"
          ? "æ•´ç†ä¸­"
          : pack.status === "planned"
          ? "è®¡åˆ’ä¸­"
          : "é¢„ç•™ç©ºä½";

      const heroHTML = `
        <section class="boardgame-pack-hero">
          <p class="eyebrow">Card Pack Detail</p>
          <h1 class="hero-title">${pack.name}</h1>
          <p class="boardgame-pack-meta">
            <span class="pack-badge">${badgeText}</span>
            ${
              pack.subtitle
                ? `<span class="dot-sep">Â·</span><span>${pack.subtitle}</span>`
                : ""
            }
          </p>
          <p class="hero-subtitle">
            ${pack.description || ""}
          </p>
          ${
            pack.era || pack.side
              ? `<p class="boardgame-pack-meta">
                  ${pack.side ? `<span>${pack.side}</span>` : ""}
                  ${
                    pack.era
                      ? `<span class="dot-sep">Â·</span><span>${pack.era}</span>`
                      : ""
                  }
                </p>`
              : ""
          }
          ${
            pack.note
              ? `<p class="boardgame-pack-note">${pack.note}</p>`
              : ""
          }
        </section>
      `;

      let cardsHTML = "";

      if (!cards.length) {
        cardsHTML = `
          <section class="card-list-section">
            <h2 class="section-title">å•å¡åˆ—è¡¨</h2>
            <p class="section-subtitle">
              è¿™ä¸ªå¡åŒ…çš„å…·ä½“å•å¡æ¡ç›®è¿˜åœ¨æ•´ç†ä¸­ã€‚
              <br />
              ç­‰ä½ å“ªå¤©å¿ƒæƒ…ä¸é”™ï¼Œå°±å¯ä»¥æ¥ boardgame-data.js é‡Œé¢æŠŠ Excel é‡Œçš„æ•°æ®ä¸€ç‚¹ç‚¹æ¬è¿‡æ¥ã€‚
            </p>
          </section>
        `;
      } else {
        const cardItemsHTML = cards
          .map((card) => {
            const tagStr = (card.tags || []).join(" Â· ");
            return `
              <article class="card-item">
                <header class="card-item-header">
                  <div class="card-item-code">${card.code || ""}</div>
                  <h3 class="card-item-name">${card.name || "æœªå‘½åå¡ç‰Œ"}</h3>
                </header>
                <p class="card-item-meta">
                  <span>${card.type || "ç±»å‹æœªæ ‡æ³¨"}</span>
                  ${
                    card.cost
                      ? `<span class="dot-sep">Â·</span><span>è´¹ç”¨ ${card.cost}</span>`
                      : ""
                  }
                  ${
                    card.role
                      ? `<span class="dot-sep">Â·</span><span>${card.role}</span>`
                      : ""
                  }
                </p>
                ${
                  tagStr
                    ? `<p class="card-item-tags">${tagStr}</p>`
                    : ""
                }
                ${
                  card.text
                    ? `<p class="card-item-text">${card.text}</p>`
                    : ""
                }
                ${
                  card.note
                    ? `<p class="card-item-note">å¤‡æ³¨ï¼š${card.note}</p>`
                    : ""
                }
              </article>
            `;
          })
          .join("");

        cardsHTML = `
          <section class="card-list-section">
            <h2 class="section-title">å•å¡åˆ—è¡¨</h2>
            <div class="card-list-grid">
              ${cardItemsHTML}
            </div>
          </section>
        `;
      }

      const backHTML = `
        <section class="card-list-section">
          <p>
            <a href="boardgame.html" class="btn btn-ghost btn-compact">
              â† è¿”å›å¡åŒ…æ€»è§ˆ
            </a>
          </p>
        </section>
      `;

      root.innerHTML = heroHTML + cardsHTML + backHTML;
    });
  </script>
</body>
</html>
